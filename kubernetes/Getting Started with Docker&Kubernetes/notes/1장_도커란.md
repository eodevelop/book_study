### 들어가며

- 도커(Docker)
    - 리눅스 컨테이너에 여러 기능을 추가함으로써 어플리케이션을 컨테이너로서 좀 더 쉽게 사용할 수 있게 만들어진 오픈소스 프로젝트
    - Go로 작정돼 있다.
    - 기존에 쓰이던 가상화 방식인 가상 머신과 달리 도커 컨테이너는 성능의 손실이 거의 없어서 차세대 클라우드 인프라 솔루션으로 많은 주목을 받는다.
- 도커 생태계의 여러 프로젝트들은 도커 엔진을 좀 더 효율적으로 사용하기 위한 것에 불과하기 때문에 핵심이 되는것은 도커 엔진이다.
- 이번장에서는 도커 컨테이너를 다루기 위한 가장 기본적인 프로젝트인 도커 엔진을 사용하는 방법을 다룬다.

### 1.1 가상 머신과 도커 컨테이너

![alt text](1장_가상머신과%20도커%20컨테이너%20구조.png)

- 기존의 가상화 기술
    - 하이퍼바이저를 이용해 여러 개의 운영체제를 하나의 호스트에서 생성해 사용하는 방식.
        - `하이퍼바이저`는 호스트 시스템에서 다수의 운영체제를 동시에 실행할 수 있게 해주는 소프트웨어
    - 단점
        - 시스템 자원의 가상화는 무조건 하이퍼 바이저를 거처야하기 때문에 일반 호스트에 비해 성능의 손실 발생
        - 게스트 운영체제를 사용하기 위한 라이브러리, 커널 등을 전부 포함하기 때문에 이미지의 크기 또한 커진다.
        - 즉, 가상 머신은 완벽한 운영체제를 생성할 수 있다는 장점은 있지만 일반 호스트에 비해 성능 손실이 있으며, 수 기가 바이트에 달하는 가상 머신 이미지를 어플리케이션으로 배포하기는 부담스럽다.
- 도커 컨테이너
    - 가상화된 공간 생성에 리눅스 자체 기능인 chroot, 네임스페이스, cgroup을 사용
        - 위 방식을 통해 프로세스 단위의 격리 환경을 만들어서 성능 손실이 거의 없다.
    - 다음 이유로 이미지 크기 대폭 감소
        - 컨테이너에 필요한 커널은 호스트의 커널을 공유해서 사용
        - 컨테이너 내부에는 어플리케이션 구동을 위한 라이브러리 및 실행 파일만 존재

### 1.2 도커를 시작해야 하는 이유

#### 1.2.1 애플리케이션의 개발과 배포가 편해진다.

- 호스트 OS
    - 서버를 부팅할 때 실행되는 운영체제를 일반적으로 부르는 말
- 도커 컨테이너는 호스트 OS 위에서 실행되는 격리된 공간
    - 위 이유로 컨테이너 자체에 특별한 권한을 주지 않는 한 호스트 OS 에는 영향을 끼치지 않는다.
    - 즉, 독립된 개발 환경을 보장 받는다.
- 도커의 배포 방법
    - 작업을 완료한 컨테이너를 도커 이미지라는 일종의 패키지로 만들어 운영서버에 전달하면 서비스를 개발했을때와 똑같은 환경으로 컨테이너로 복제 및 실행 가능
    - 위 이유로 개발/운영 환경의 통합이 가능하다.

#### 1.2.2 여러 어플리케이션의 독립성과 확장성이 높아진다.

- `모놀리스(Monolith)` 어플리케이션
    - 여러 모듈이 상호작용하는 로직을 하나의 프로그램 내에서 구동 시키는 방식
    - 소규모 서비스에는 적합하지만 대규모 에서는 소프트웨어의 확장성과 유연성이 줄어든다.
- `마이크로서비스`
    - 여러 모듈을 독립된 형태로 구성
        - 언어에 종속적이지 않게 되고 변화에 빠르게 대응 가능
        - 각 모듈별 관리가 쉬워진다.
- 마이크로서비스는 여러 모듈에게 독립된 환경을 제공해야 하기 떄문에 도커 컨테이너가 적합하다.
    - 또한 컨테이너는 수 초내로 생성 및 시작도 가능하다